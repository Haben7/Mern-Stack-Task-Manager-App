{"ast":null,"code":"import React,{useState}from\"react\";import'./signUp.css';import{Link,useNavigate}from'react-router-dom';import axios from\"axios\";import{useSelector,useDispatch}from\"react-redux\";// Import useDispatch\nimport{authActions}from\"../store/authSlice\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SignUp(){const[action,setAction]=useState(\"Sign Up\");const[Data,setData]=useState({username:\"\",email:\"\",password:\"\"});const navigate=useNavigate();const dispatch=useDispatch();// Initialize dispatch\nconst isLoggedIn=useSelector(state=>state.auth.isLoggedIn);// Ensure the navigation only happens after the component is rendered properly\nReact.useEffect(()=>{if(isLoggedIn){navigate(\"/home\");}},[isLoggedIn,navigate]);// Handler for input changes\nconst change=e=>{const{name,value}=e.target;setData({...Data,[name]:value});};// Submit handler\nconst submit=async()=>{try{if(Data.username===\"\"||Data.email===\"\"||Data.password===\"\"){alert(\"All fields are required\");}else{const response=await axios.post(\"http://localhost:4000/api/v1/sign-up\",Data);// Assuming the API returns id and token upon successful registration\nsetData({username:\"\",email:\"\",password:\"\"});alert(\"User registered successfully\");localStorage.setItem(\"id\",response.data.id);localStorage.setItem(\"token\",response.data.token);// Dispatch login action to update the authentication state\ndispatch(authActions.login());navigate(\"/home\");// Redirect to home page\n}}catch(error){alert(\"An error occurred during registration\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:action}),/*#__PURE__*/_jsx(\"div\",{className:\"underline\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"./img/icons8-person-24.png\",alt:\"person icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"Name\",required:true,value:Data.username,onChange:change})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"./img/icons8-email-30.png\",alt:\"email icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",required:true,value:Data.email,onChange:change})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"img\",{id:\"password\",src:\"./img/icons8-password-50.png\",alt:\"password icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",required:true,value:Data.password,onChange:change})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-container\",children:/*#__PURE__*/_jsx(\"button\",{onClick:submit,className:\"submit\",children:\"Sign Up\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"forgot-passwordd\",children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signIn\",className:\"login-link\",children:\"Login here\"})]})]});}export default SignUp;","map":{"version":3,"names":["React","useState","Link","useNavigate","axios","useSelector","useDispatch","authActions","jsx","_jsx","jsxs","_jsxs","SignUp","action","setAction","Data","setData","username","email","password","navigate","dispatch","isLoggedIn","state","auth","useEffect","change","e","name","value","target","submit","alert","response","post","localStorage","setItem","data","id","token","login","error","className","children","src","alt","type","placeholder","required","onChange","onClick","to"],"sources":["/home/netsi/omishtu_joy/Day_4/taskify/frontend/src/components/signUp.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport './signUp.css';\nimport { Link, useNavigate } from 'react-router-dom';\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\"; // Import useDispatch\n\nimport { authActions } from \"../store/authSlice\";\n\nfunction SignUp() {\n  const [action, setAction] = useState(\"Sign Up\");\n  const [Data, setData] = useState({ username: \"\", email: \"\", password: \"\" });\n  const navigate = useNavigate();\n  const dispatch = useDispatch(); // Initialize dispatch\n  const isLoggedIn = useSelector((state) => state.auth.isLoggedIn);\n\n  // Ensure the navigation only happens after the component is rendered properly\n  React.useEffect(() => {\n    if (isLoggedIn) {\n      navigate(\"/home\");\n    }\n  }, [isLoggedIn, navigate]);\n\n \n\n  // Handler for input changes\n  const change = (e) => {\n    const { name, value } = e.target;\n    setData({ ...Data, [name]: value });\n  };\n\n  // Submit handler\n  const submit = async () => {\n    try {\n      if (Data.username === \"\" || Data.email === \"\" || Data.password === \"\") {\n        alert(\"All fields are required\");\n      } else {\n        const response = await axios.post(\"http://localhost:4000/api/v1/sign-up\", Data);\n        \n        // Assuming the API returns id and token upon successful registration\n        setData({ username: \"\", email: \"\", password: \"\" });\n        alert(\"User registered successfully\");\n        localStorage.setItem(\"id\", response.data.id);\n        localStorage.setItem(\"token\", response.data.token);\n\n        // Dispatch login action to update the authentication state\n\n     \n        dispatch(authActions.login());\n        navigate(\"/home\"); // Redirect to home page\n      }\n    } catch (error) {\n      alert(\"An error occurred during registration\");\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"header\">\n        <div className=\"text\">{action}</div>\n        <div className=\"underline\"></div>\n      </div>\n      <div className=\"inputs\">\n        <div className=\"input\">\n          <img src=\"./img/icons8-person-24.png\" alt=\"person icon\" />\n          <input\n            type=\"text\"\n            name=\"username\"\n            placeholder=\"Name\"\n            required\n            value={Data.username}\n            onChange={change}\n          />\n        </div>\n\n        <div className=\"input\">\n          <img src=\"./img/icons8-email-30.png\" alt=\"email icon\" />\n          <input\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Email\"\n            required\n            value={Data.email}\n            onChange={change}\n          />\n        </div>\n\n        <div className=\"input\">\n          <img id=\"password\" src=\"./img/icons8-password-50.png\" alt=\"password icon\" />\n          <input\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"Password\"\n            required\n            value={Data.password}\n            onChange={change}\n          />\n        </div>\n      </div>\n\n      <div className=\"submit-container\">\n        <button onClick={submit} className=\"submit\">Sign Up</button>\n      </div>\n\n      <div className=\"forgot-passwordd\">\n        Already have an account? <Link to=\"/signIn\" className=\"login-link\">Login here</Link>\n      </div>\n    </div>\n  );\n}\n\nexport default SignUp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}